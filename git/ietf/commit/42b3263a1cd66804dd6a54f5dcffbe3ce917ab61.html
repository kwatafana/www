<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>remove unecisarry code - ietf - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="ietf Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="ietf Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="/git.css" />
</head>
<body>
<table><tr><td><a href="/index.html"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>ietf</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.pretty.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/42b3263a1cd66804dd6a54f5dcffbe3ce917ab61.html">42b3263a1cd66804dd6a54f5dcffbe3ce917ab61</a>
<b>parent</b> <a href="../commit/adf027ea362b90e05c5340f8f0fe30f241deb2f7.html">adf027ea362b90e05c5340f8f0fe30f241deb2f7</a>
<b>Author:</b> cy6erlion &lt;<a href="mailto:dev@merely.tech">dev@merely.tech</a>&gt;
<b>Date:</b>   Tue, 12 Jan 2021 12:27:12 +0200

remove unecisarry code

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">Cargo.lock</a></td><td> | </td><td class="num">288</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">Cargo.toml</a></td><td> | </td><td class="num">8</td><td><span class="i">++++++</span><span class="d">--</span></td></tr>
<tr><td class="A">A</td><td><a href="#h2">src/#search.rs#</a></td><td> | </td><td class="num">66</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h3">src/search.rs</a></td><td> | </td><td class="num">65</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">src/storage.rs</a></td><td> | </td><td class="num">18</td><td><span class="i"></span><span class="d">------------------</span></td></tr>
</table></pre><pre>5 files changed, 424 insertions(+), 21 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/Cargo.lock.html">Cargo.lock</a> b/<a href="../file/Cargo.lock.html">Cargo.lock</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,6 +1,15 @@
</a> # This file is automatically @generated by Cargo.
 # It is not intended for manual editing.
 [[package]]
<a href="#h0-0-3" id="h0-0-3" class="i">+name = &quot;aho-corasick&quot;
</a><a href="#h0-0-4" id="h0-0-4" class="i">+version = &quot;0.7.15&quot;
</a><a href="#h0-0-5" id="h0-0-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-0-6" id="h0-0-6" class="i">+checksum = &quot;7404febffaa47dac81aa44dba71523c9d069b1bdc50a77db41195149e17f68e5&quot;
</a><a href="#h0-0-7" id="h0-0-7" class="i">+dependencies = [
</a><a href="#h0-0-8" id="h0-0-8" class="i">+ &quot;memchr&quot;,
</a><a href="#h0-0-9" id="h0-0-9" class="i">+]
</a><a href="#h0-0-10" id="h0-0-10" class="i">+
</a><a href="#h0-0-11" id="h0-0-11" class="i">+[[package]]
</a> name = &quot;ansi_term&quot;
 version = &quot;0.11.0&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-1" id="h0-1" class="h">@@ -30,18 +39,41 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-1-3" id="h0-1-3" class="i">+name = &quot;base64&quot;
</a><a href="#h0-1-4" id="h0-1-4" class="i">+version = &quot;0.12.3&quot;
</a><a href="#h0-1-5" id="h0-1-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-1-6" id="h0-1-6" class="i">+checksum = &quot;3441f0f7b02788e948e47f457ca01f1d7e6d92c693bc132c22b087d3141c03ff&quot;
</a><a href="#h0-1-7" id="h0-1-7" class="i">+
</a><a href="#h0-1-8" id="h0-1-8" class="i">+[[package]]
</a> name = &quot;bitflags&quot;
 version = &quot;1.2.1&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
 checksum = &quot;cf1de2fe8c75bc145a2f577add951f8134889b4795d47466a54a5c846d691693&quot;
 
 [[package]]
<a href="#h0-1-15" id="h0-1-15" class="i">+name = &quot;bstr&quot;
</a><a href="#h0-1-16" id="h0-1-16" class="i">+version = &quot;0.2.14&quot;
</a><a href="#h0-1-17" id="h0-1-17" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-1-18" id="h0-1-18" class="i">+checksum = &quot;473fc6b38233f9af7baa94fb5852dca389e3d95b8e21c8e3719301462c5d9faf&quot;
</a><a href="#h0-1-19" id="h0-1-19" class="i">+dependencies = [
</a><a href="#h0-1-20" id="h0-1-20" class="i">+ &quot;lazy_static&quot;,
</a><a href="#h0-1-21" id="h0-1-21" class="i">+ &quot;memchr&quot;,
</a><a href="#h0-1-22" id="h0-1-22" class="i">+ &quot;regex-automata&quot;,
</a><a href="#h0-1-23" id="h0-1-23" class="i">+]
</a><a href="#h0-1-24" id="h0-1-24" class="i">+
</a><a href="#h0-1-25" id="h0-1-25" class="i">+[[package]]
</a> name = &quot;bumpalo&quot;
 version = &quot;3.4.0&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
 checksum = &quot;2e8c087f005730276d1096a652e92a8bacee2e2472bcc9715a74d2bec38b5820&quot;
 
 [[package]]
<a href="#h0-1-32" id="h0-1-32" class="i">+name = &quot;bytecount&quot;
</a><a href="#h0-1-33" id="h0-1-33" class="i">+version = &quot;0.6.2&quot;
</a><a href="#h0-1-34" id="h0-1-34" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-1-35" id="h0-1-35" class="i">+checksum = &quot;72feb31ffc86498dacdbd0fcebb56138e7177a8cc5cea4516031d15ae85a742e&quot;
</a><a href="#h0-1-36" id="h0-1-36" class="i">+
</a><a href="#h0-1-37" id="h0-1-37" class="i">+[[package]]
</a> name = &quot;byteorder&quot;
 version = &quot;1.3.4&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-2" id="h0-2" class="h">@@ -102,6 +134,24 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-2-3" id="h0-2-3" class="i">+name = &quot;encoding_rs&quot;
</a><a href="#h0-2-4" id="h0-2-4" class="i">+version = &quot;0.8.26&quot;
</a><a href="#h0-2-5" id="h0-2-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-2-6" id="h0-2-6" class="i">+checksum = &quot;801bbab217d7f79c0062f4f7205b5d4427c6d1a7bd7aafdd1475f7c59d62b283&quot;
</a><a href="#h0-2-7" id="h0-2-7" class="i">+dependencies = [
</a><a href="#h0-2-8" id="h0-2-8" class="i">+ &quot;cfg-if 1.0.0&quot;,
</a><a href="#h0-2-9" id="h0-2-9" class="i">+]
</a><a href="#h0-2-10" id="h0-2-10" class="i">+
</a><a href="#h0-2-11" id="h0-2-11" class="i">+[[package]]
</a><a href="#h0-2-12" id="h0-2-12" class="i">+name = &quot;encoding_rs_io&quot;
</a><a href="#h0-2-13" id="h0-2-13" class="i">+version = &quot;0.1.7&quot;
</a><a href="#h0-2-14" id="h0-2-14" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-2-15" id="h0-2-15" class="i">+checksum = &quot;1cc3c5651fb62ab8aa3103998dade57efdd028544bd300516baa31840c252a83&quot;
</a><a href="#h0-2-16" id="h0-2-16" class="i">+dependencies = [
</a><a href="#h0-2-17" id="h0-2-17" class="i">+ &quot;encoding_rs&quot;,
</a><a href="#h0-2-18" id="h0-2-18" class="i">+]
</a><a href="#h0-2-19" id="h0-2-19" class="i">+
</a><a href="#h0-2-20" id="h0-2-20" class="i">+[[package]]
</a> name = &quot;errno&quot;
 version = &quot;0.2.7&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-3" id="h0-3" class="h">@@ -123,6 +173,12 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-3-3" id="h0-3-3" class="i">+name = &quot;fnv&quot;
</a><a href="#h0-3-4" id="h0-3-4" class="i">+version = &quot;1.0.7&quot;
</a><a href="#h0-3-5" id="h0-3-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-3-6" id="h0-3-6" class="i">+checksum = &quot;3f9eec918d3f24069decb9af1554cad7c880e2da24a9afd88aca000531ab82c1&quot;
</a><a href="#h0-3-7" id="h0-3-7" class="i">+
</a><a href="#h0-3-8" id="h0-3-8" class="i">+[[package]]
</a> name = &quot;gcc&quot;
 version = &quot;0.3.55&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-4" id="h0-4" class="h">@@ -140,6 +196,104 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-4-3" id="h0-4-3" class="i">+name = &quot;globset&quot;
</a><a href="#h0-4-4" id="h0-4-4" class="i">+version = &quot;0.4.6&quot;
</a><a href="#h0-4-5" id="h0-4-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-6" id="h0-4-6" class="i">+checksum = &quot;c152169ef1e421390738366d2f796655fec62621dabbd0fd476f905934061e4a&quot;
</a><a href="#h0-4-7" id="h0-4-7" class="i">+dependencies = [
</a><a href="#h0-4-8" id="h0-4-8" class="i">+ &quot;aho-corasick&quot;,
</a><a href="#h0-4-9" id="h0-4-9" class="i">+ &quot;bstr&quot;,
</a><a href="#h0-4-10" id="h0-4-10" class="i">+ &quot;fnv&quot;,
</a><a href="#h0-4-11" id="h0-4-11" class="i">+ &quot;log&quot;,
</a><a href="#h0-4-12" id="h0-4-12" class="i">+ &quot;regex&quot;,
</a><a href="#h0-4-13" id="h0-4-13" class="i">+]
</a><a href="#h0-4-14" id="h0-4-14" class="i">+
</a><a href="#h0-4-15" id="h0-4-15" class="i">+[[package]]
</a><a href="#h0-4-16" id="h0-4-16" class="i">+name = &quot;grep&quot;
</a><a href="#h0-4-17" id="h0-4-17" class="i">+version = &quot;0.2.7&quot;
</a><a href="#h0-4-18" id="h0-4-18" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-19" id="h0-4-19" class="i">+checksum = &quot;582e93ba59eae0f9607f53832326f351f87a5175f17ff123b3986b927a0e7e68&quot;
</a><a href="#h0-4-20" id="h0-4-20" class="i">+dependencies = [
</a><a href="#h0-4-21" id="h0-4-21" class="i">+ &quot;grep-cli&quot;,
</a><a href="#h0-4-22" id="h0-4-22" class="i">+ &quot;grep-matcher&quot;,
</a><a href="#h0-4-23" id="h0-4-23" class="i">+ &quot;grep-printer&quot;,
</a><a href="#h0-4-24" id="h0-4-24" class="i">+ &quot;grep-regex&quot;,
</a><a href="#h0-4-25" id="h0-4-25" class="i">+ &quot;grep-searcher&quot;,
</a><a href="#h0-4-26" id="h0-4-26" class="i">+]
</a><a href="#h0-4-27" id="h0-4-27" class="i">+
</a><a href="#h0-4-28" id="h0-4-28" class="i">+[[package]]
</a><a href="#h0-4-29" id="h0-4-29" class="i">+name = &quot;grep-cli&quot;
</a><a href="#h0-4-30" id="h0-4-30" class="i">+version = &quot;0.1.5&quot;
</a><a href="#h0-4-31" id="h0-4-31" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-32" id="h0-4-32" class="i">+checksum = &quot;3592784f7791f5f0bfc2e4b5595dc2d4e34a79099d7228d121b954bae73db182&quot;
</a><a href="#h0-4-33" id="h0-4-33" class="i">+dependencies = [
</a><a href="#h0-4-34" id="h0-4-34" class="i">+ &quot;atty&quot;,
</a><a href="#h0-4-35" id="h0-4-35" class="i">+ &quot;bstr&quot;,
</a><a href="#h0-4-36" id="h0-4-36" class="i">+ &quot;globset&quot;,
</a><a href="#h0-4-37" id="h0-4-37" class="i">+ &quot;lazy_static&quot;,
</a><a href="#h0-4-38" id="h0-4-38" class="i">+ &quot;log&quot;,
</a><a href="#h0-4-39" id="h0-4-39" class="i">+ &quot;regex&quot;,
</a><a href="#h0-4-40" id="h0-4-40" class="i">+ &quot;same-file&quot;,
</a><a href="#h0-4-41" id="h0-4-41" class="i">+ &quot;termcolor&quot;,
</a><a href="#h0-4-42" id="h0-4-42" class="i">+ &quot;winapi-util&quot;,
</a><a href="#h0-4-43" id="h0-4-43" class="i">+]
</a><a href="#h0-4-44" id="h0-4-44" class="i">+
</a><a href="#h0-4-45" id="h0-4-45" class="i">+[[package]]
</a><a href="#h0-4-46" id="h0-4-46" class="i">+name = &quot;grep-matcher&quot;
</a><a href="#h0-4-47" id="h0-4-47" class="i">+version = &quot;0.1.4&quot;
</a><a href="#h0-4-48" id="h0-4-48" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-49" id="h0-4-49" class="i">+checksum = &quot;fdf0e1fd5af17008a918fd868e63ec0226e96ce88b832f00c7fb041e014b9350&quot;
</a><a href="#h0-4-50" id="h0-4-50" class="i">+dependencies = [
</a><a href="#h0-4-51" id="h0-4-51" class="i">+ &quot;memchr&quot;,
</a><a href="#h0-4-52" id="h0-4-52" class="i">+]
</a><a href="#h0-4-53" id="h0-4-53" class="i">+
</a><a href="#h0-4-54" id="h0-4-54" class="i">+[[package]]
</a><a href="#h0-4-55" id="h0-4-55" class="i">+name = &quot;grep-printer&quot;
</a><a href="#h0-4-56" id="h0-4-56" class="i">+version = &quot;0.1.5&quot;
</a><a href="#h0-4-57" id="h0-4-57" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-58" id="h0-4-58" class="i">+checksum = &quot;7f34d40c840fe8e413a94598345d8a4bb25fdbb4f3860a6c00a88bb296d89d00&quot;
</a><a href="#h0-4-59" id="h0-4-59" class="i">+dependencies = [
</a><a href="#h0-4-60" id="h0-4-60" class="i">+ &quot;base64 0.12.3&quot;,
</a><a href="#h0-4-61" id="h0-4-61" class="i">+ &quot;bstr&quot;,
</a><a href="#h0-4-62" id="h0-4-62" class="i">+ &quot;grep-matcher&quot;,
</a><a href="#h0-4-63" id="h0-4-63" class="i">+ &quot;grep-searcher&quot;,
</a><a href="#h0-4-64" id="h0-4-64" class="i">+ &quot;serde&quot;,
</a><a href="#h0-4-65" id="h0-4-65" class="i">+ &quot;serde_derive&quot;,
</a><a href="#h0-4-66" id="h0-4-66" class="i">+ &quot;serde_json&quot;,
</a><a href="#h0-4-67" id="h0-4-67" class="i">+ &quot;termcolor&quot;,
</a><a href="#h0-4-68" id="h0-4-68" class="i">+]
</a><a href="#h0-4-69" id="h0-4-69" class="i">+
</a><a href="#h0-4-70" id="h0-4-70" class="i">+[[package]]
</a><a href="#h0-4-71" id="h0-4-71" class="i">+name = &quot;grep-regex&quot;
</a><a href="#h0-4-72" id="h0-4-72" class="i">+version = &quot;0.1.8&quot;
</a><a href="#h0-4-73" id="h0-4-73" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-74" id="h0-4-74" class="i">+checksum = &quot;a7ba5e492a049950acbd60f5d183011fdca66c248663f6b4e118d591eeada3d2&quot;
</a><a href="#h0-4-75" id="h0-4-75" class="i">+dependencies = [
</a><a href="#h0-4-76" id="h0-4-76" class="i">+ &quot;aho-corasick&quot;,
</a><a href="#h0-4-77" id="h0-4-77" class="i">+ &quot;bstr&quot;,
</a><a href="#h0-4-78" id="h0-4-78" class="i">+ &quot;grep-matcher&quot;,
</a><a href="#h0-4-79" id="h0-4-79" class="i">+ &quot;log&quot;,
</a><a href="#h0-4-80" id="h0-4-80" class="i">+ &quot;regex&quot;,
</a><a href="#h0-4-81" id="h0-4-81" class="i">+ &quot;regex-syntax&quot;,
</a><a href="#h0-4-82" id="h0-4-82" class="i">+ &quot;thread_local&quot;,
</a><a href="#h0-4-83" id="h0-4-83" class="i">+]
</a><a href="#h0-4-84" id="h0-4-84" class="i">+
</a><a href="#h0-4-85" id="h0-4-85" class="i">+[[package]]
</a><a href="#h0-4-86" id="h0-4-86" class="i">+name = &quot;grep-searcher&quot;
</a><a href="#h0-4-87" id="h0-4-87" class="i">+version = &quot;0.1.7&quot;
</a><a href="#h0-4-88" id="h0-4-88" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-4-89" id="h0-4-89" class="i">+checksum = &quot;19897320890970db77fb9e8110aeafdf5a74f4ee32756db16d44a96d8f454b1b&quot;
</a><a href="#h0-4-90" id="h0-4-90" class="i">+dependencies = [
</a><a href="#h0-4-91" id="h0-4-91" class="i">+ &quot;bstr&quot;,
</a><a href="#h0-4-92" id="h0-4-92" class="i">+ &quot;bytecount&quot;,
</a><a href="#h0-4-93" id="h0-4-93" class="i">+ &quot;encoding_rs&quot;,
</a><a href="#h0-4-94" id="h0-4-94" class="i">+ &quot;encoding_rs_io&quot;,
</a><a href="#h0-4-95" id="h0-4-95" class="i">+ &quot;grep-matcher&quot;,
</a><a href="#h0-4-96" id="h0-4-96" class="i">+ &quot;log&quot;,
</a><a href="#h0-4-97" id="h0-4-97" class="i">+ &quot;memmap&quot;,
</a><a href="#h0-4-98" id="h0-4-98" class="i">+]
</a><a href="#h0-4-99" id="h0-4-99" class="i">+
</a><a href="#h0-4-100" id="h0-4-100" class="i">+[[package]]
</a> name = &quot;hermit-abi&quot;
 version = &quot;0.1.17&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-5" id="h0-5" class="h">@@ -154,11 +308,19 @@ version = &quot;0.1.0&quot;
</a> dependencies = [
  &quot;clap&quot;,
  &quot;dirs-next&quot;,
<a href="#h0-5-3" id="h0-5-3" class="i">+ &quot;grep&quot;,
</a>  &quot;minreq&quot;,
  &quot;pager&quot;,
<a href="#h0-5-6" id="h0-5-6" class="i">+ &quot;walkdir&quot;,
</a> ]
 
 [[package]]
<a href="#h0-5-10" id="h0-5-10" class="i">+name = &quot;itoa&quot;
</a><a href="#h0-5-11" id="h0-5-11" class="i">+version = &quot;0.4.7&quot;
</a><a href="#h0-5-12" id="h0-5-12" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-5-13" id="h0-5-13" class="i">+checksum = &quot;dd25036021b0de88a0aff6b850051563c6516d0bf53f8638938edbb9de732736&quot;
</a><a href="#h0-5-14" id="h0-5-14" class="i">+
</a><a href="#h0-5-15" id="h0-5-15" class="i">+[[package]]
</a> name = &quot;js-sys&quot;
 version = &quot;0.3.46&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-6" id="h0-6" class="h">@@ -189,6 +351,22 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-6-3" id="h0-6-3" class="i">+name = &quot;memchr&quot;
</a><a href="#h0-6-4" id="h0-6-4" class="i">+version = &quot;2.3.4&quot;
</a><a href="#h0-6-5" id="h0-6-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-6-6" id="h0-6-6" class="i">+checksum = &quot;0ee1c47aaa256ecabcaea351eae4a9b01ef39ed810004e298d2511ed284b1525&quot;
</a><a href="#h0-6-7" id="h0-6-7" class="i">+
</a><a href="#h0-6-8" id="h0-6-8" class="i">+[[package]]
</a><a href="#h0-6-9" id="h0-6-9" class="i">+name = &quot;memmap&quot;
</a><a href="#h0-6-10" id="h0-6-10" class="i">+version = &quot;0.7.0&quot;
</a><a href="#h0-6-11" id="h0-6-11" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-6-12" id="h0-6-12" class="i">+checksum = &quot;6585fd95e7bb50d6cc31e20d4cf9afb4e2ba16c5846fc76793f11218da9c475b&quot;
</a><a href="#h0-6-13" id="h0-6-13" class="i">+dependencies = [
</a><a href="#h0-6-14" id="h0-6-14" class="i">+ &quot;libc&quot;,
</a><a href="#h0-6-15" id="h0-6-15" class="i">+ &quot;winapi&quot;,
</a><a href="#h0-6-16" id="h0-6-16" class="i">+]
</a><a href="#h0-6-17" id="h0-6-17" class="i">+
</a><a href="#h0-6-18" id="h0-6-18" class="i">+[[package]]
</a> name = &quot;minreq&quot;
 version = &quot;2.2.1&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-7" id="h0-7" class="h">@@ -251,6 +429,33 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-7-3" id="h0-7-3" class="i">+name = &quot;regex&quot;
</a><a href="#h0-7-4" id="h0-7-4" class="i">+version = &quot;1.4.2&quot;
</a><a href="#h0-7-5" id="h0-7-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-7-6" id="h0-7-6" class="i">+checksum = &quot;38cf2c13ed4745de91a5eb834e11c00bcc3709e773173b2ce4c56c9fbde04b9c&quot;
</a><a href="#h0-7-7" id="h0-7-7" class="i">+dependencies = [
</a><a href="#h0-7-8" id="h0-7-8" class="i">+ &quot;aho-corasick&quot;,
</a><a href="#h0-7-9" id="h0-7-9" class="i">+ &quot;memchr&quot;,
</a><a href="#h0-7-10" id="h0-7-10" class="i">+ &quot;regex-syntax&quot;,
</a><a href="#h0-7-11" id="h0-7-11" class="i">+ &quot;thread_local&quot;,
</a><a href="#h0-7-12" id="h0-7-12" class="i">+]
</a><a href="#h0-7-13" id="h0-7-13" class="i">+
</a><a href="#h0-7-14" id="h0-7-14" class="i">+[[package]]
</a><a href="#h0-7-15" id="h0-7-15" class="i">+name = &quot;regex-automata&quot;
</a><a href="#h0-7-16" id="h0-7-16" class="i">+version = &quot;0.1.9&quot;
</a><a href="#h0-7-17" id="h0-7-17" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-7-18" id="h0-7-18" class="i">+checksum = &quot;ae1ded71d66a4a97f5e961fd0cb25a5f366a42a41570d16a763a69c092c26ae4&quot;
</a><a href="#h0-7-19" id="h0-7-19" class="i">+dependencies = [
</a><a href="#h0-7-20" id="h0-7-20" class="i">+ &quot;byteorder&quot;,
</a><a href="#h0-7-21" id="h0-7-21" class="i">+]
</a><a href="#h0-7-22" id="h0-7-22" class="i">+
</a><a href="#h0-7-23" id="h0-7-23" class="i">+[[package]]
</a><a href="#h0-7-24" id="h0-7-24" class="i">+name = &quot;regex-syntax&quot;
</a><a href="#h0-7-25" id="h0-7-25" class="i">+version = &quot;0.6.21&quot;
</a><a href="#h0-7-26" id="h0-7-26" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-7-27" id="h0-7-27" class="i">+checksum = &quot;3b181ba2dcf07aaccad5448e8ead58db5b742cf85dfe035e2227f137a539a189&quot;
</a><a href="#h0-7-28" id="h0-7-28" class="i">+
</a><a href="#h0-7-29" id="h0-7-29" class="i">+[[package]]
</a> name = &quot;ring&quot;
 version = &quot;0.16.19&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-8" id="h0-8" class="h">@@ -271,7 +476,7 @@ version = &quot;0.16.0&quot;
</a> source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
 checksum = &quot;b25a18b1bf7387f0145e7f8324e700805aade3842dd3db2e74e4cdeb4677c09e&quot;
 dependencies = [
<a href="#h0-8-3" id="h0-8-3" class="d">- &quot;base64&quot;,
</a><a href="#h0-8-4" id="h0-8-4" class="i">+ &quot;base64 0.10.1&quot;,
</a>  &quot;log&quot;,
  &quot;ring&quot;,
  &quot;sct&quot;,
<a href="#h0-9" id="h0-9" class="h">@@ -279,6 +484,21 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-9-3" id="h0-9-3" class="i">+name = &quot;ryu&quot;
</a><a href="#h0-9-4" id="h0-9-4" class="i">+version = &quot;1.0.5&quot;
</a><a href="#h0-9-5" id="h0-9-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-9-6" id="h0-9-6" class="i">+checksum = &quot;71d301d4193d031abdd79ff7e3dd721168a9572ef3fe51a1517aba235bd8f86e&quot;
</a><a href="#h0-9-7" id="h0-9-7" class="i">+
</a><a href="#h0-9-8" id="h0-9-8" class="i">+[[package]]
</a><a href="#h0-9-9" id="h0-9-9" class="i">+name = &quot;same-file&quot;
</a><a href="#h0-9-10" id="h0-9-10" class="i">+version = &quot;1.0.6&quot;
</a><a href="#h0-9-11" id="h0-9-11" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-9-12" id="h0-9-12" class="i">+checksum = &quot;93fc1dc3aaa9bfed95e02e6eadabb4baf7e3078b0bd1b4d7b6b0b68378900502&quot;
</a><a href="#h0-9-13" id="h0-9-13" class="i">+dependencies = [
</a><a href="#h0-9-14" id="h0-9-14" class="i">+ &quot;winapi-util&quot;,
</a><a href="#h0-9-15" id="h0-9-15" class="i">+]
</a><a href="#h0-9-16" id="h0-9-16" class="i">+
</a><a href="#h0-9-17" id="h0-9-17" class="i">+[[package]]
</a> name = &quot;sct&quot;
 version = &quot;0.6.0&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-10" id="h0-10" class="h">@@ -289,6 +509,34 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-10-3" id="h0-10-3" class="i">+name = &quot;serde&quot;
</a><a href="#h0-10-4" id="h0-10-4" class="i">+version = &quot;1.0.118&quot;
</a><a href="#h0-10-5" id="h0-10-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-10-6" id="h0-10-6" class="i">+checksum = &quot;06c64263859d87aa2eb554587e2d23183398d617427327cf2b3d0ed8c69e4800&quot;
</a><a href="#h0-10-7" id="h0-10-7" class="i">+
</a><a href="#h0-10-8" id="h0-10-8" class="i">+[[package]]
</a><a href="#h0-10-9" id="h0-10-9" class="i">+name = &quot;serde_derive&quot;
</a><a href="#h0-10-10" id="h0-10-10" class="i">+version = &quot;1.0.118&quot;
</a><a href="#h0-10-11" id="h0-10-11" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-10-12" id="h0-10-12" class="i">+checksum = &quot;c84d3526699cd55261af4b941e4e725444df67aa4f9e6a3564f18030d12672df&quot;
</a><a href="#h0-10-13" id="h0-10-13" class="i">+dependencies = [
</a><a href="#h0-10-14" id="h0-10-14" class="i">+ &quot;proc-macro2&quot;,
</a><a href="#h0-10-15" id="h0-10-15" class="i">+ &quot;quote&quot;,
</a><a href="#h0-10-16" id="h0-10-16" class="i">+ &quot;syn&quot;,
</a><a href="#h0-10-17" id="h0-10-17" class="i">+]
</a><a href="#h0-10-18" id="h0-10-18" class="i">+
</a><a href="#h0-10-19" id="h0-10-19" class="i">+[[package]]
</a><a href="#h0-10-20" id="h0-10-20" class="i">+name = &quot;serde_json&quot;
</a><a href="#h0-10-21" id="h0-10-21" class="i">+version = &quot;1.0.61&quot;
</a><a href="#h0-10-22" id="h0-10-22" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-10-23" id="h0-10-23" class="i">+checksum = &quot;4fceb2595057b6891a4ee808f70054bd2d12f0e97f1cbb78689b59f676df325a&quot;
</a><a href="#h0-10-24" id="h0-10-24" class="i">+dependencies = [
</a><a href="#h0-10-25" id="h0-10-25" class="i">+ &quot;itoa&quot;,
</a><a href="#h0-10-26" id="h0-10-26" class="i">+ &quot;ryu&quot;,
</a><a href="#h0-10-27" id="h0-10-27" class="i">+ &quot;serde&quot;,
</a><a href="#h0-10-28" id="h0-10-28" class="i">+]
</a><a href="#h0-10-29" id="h0-10-29" class="i">+
</a><a href="#h0-10-30" id="h0-10-30" class="i">+[[package]]
</a> name = &quot;spin&quot;
 version = &quot;0.5.2&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-11" id="h0-11" class="h">@@ -312,6 +560,15 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-11-3" id="h0-11-3" class="i">+name = &quot;termcolor&quot;
</a><a href="#h0-11-4" id="h0-11-4" class="i">+version = &quot;1.1.2&quot;
</a><a href="#h0-11-5" id="h0-11-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-11-6" id="h0-11-6" class="i">+checksum = &quot;2dfed899f0eb03f32ee8c6a0aabdb8a7949659e3466561fc0adf54e26d88c5f4&quot;
</a><a href="#h0-11-7" id="h0-11-7" class="i">+dependencies = [
</a><a href="#h0-11-8" id="h0-11-8" class="i">+ &quot;winapi-util&quot;,
</a><a href="#h0-11-9" id="h0-11-9" class="i">+]
</a><a href="#h0-11-10" id="h0-11-10" class="i">+
</a><a href="#h0-11-11" id="h0-11-11" class="i">+[[package]]
</a> name = &quot;textwrap&quot;
 version = &quot;0.11.0&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-12" id="h0-12" class="h">@@ -321,6 +578,15 @@ dependencies = [
</a> ]
 
 [[package]]
<a href="#h0-12-3" id="h0-12-3" class="i">+name = &quot;thread_local&quot;
</a><a href="#h0-12-4" id="h0-12-4" class="i">+version = &quot;1.0.1&quot;
</a><a href="#h0-12-5" id="h0-12-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-12-6" id="h0-12-6" class="i">+checksum = &quot;d40c6d1b69745a6ec6fb1ca717914848da4b44ae29d9b3080cbee91d72a69b14&quot;
</a><a href="#h0-12-7" id="h0-12-7" class="i">+dependencies = [
</a><a href="#h0-12-8" id="h0-12-8" class="i">+ &quot;lazy_static&quot;,
</a><a href="#h0-12-9" id="h0-12-9" class="i">+]
</a><a href="#h0-12-10" id="h0-12-10" class="i">+
</a><a href="#h0-12-11" id="h0-12-11" class="i">+[[package]]
</a> name = &quot;unicode-width&quot;
 version = &quot;0.1.8&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-13" id="h0-13" class="h">@@ -345,6 +611,17 @@ source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a> checksum = &quot;f1bddf1187be692e79c5ffeab891132dfb0f236ed36a43c7ed39f1165ee20191&quot;
 
 [[package]]
<a href="#h0-13-3" id="h0-13-3" class="i">+name = &quot;walkdir&quot;
</a><a href="#h0-13-4" id="h0-13-4" class="i">+version = &quot;2.3.1&quot;
</a><a href="#h0-13-5" id="h0-13-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-13-6" id="h0-13-6" class="i">+checksum = &quot;777182bc735b6424e1a57516d35ed72cb8019d85c8c9bf536dccb3445c1a2f7d&quot;
</a><a href="#h0-13-7" id="h0-13-7" class="i">+dependencies = [
</a><a href="#h0-13-8" id="h0-13-8" class="i">+ &quot;same-file&quot;,
</a><a href="#h0-13-9" id="h0-13-9" class="i">+ &quot;winapi&quot;,
</a><a href="#h0-13-10" id="h0-13-10" class="i">+ &quot;winapi-util&quot;,
</a><a href="#h0-13-11" id="h0-13-11" class="i">+]
</a><a href="#h0-13-12" id="h0-13-12" class="i">+
</a><a href="#h0-13-13" id="h0-13-13" class="i">+[[package]]
</a> name = &quot;wasi&quot;
 version = &quot;0.9.0+wasi-snapshot-preview1&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<a href="#h0-14" id="h0-14" class="h">@@ -450,6 +727,15 @@ source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a> checksum = &quot;ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6&quot;
 
 [[package]]
<a href="#h0-14-3" id="h0-14-3" class="i">+name = &quot;winapi-util&quot;
</a><a href="#h0-14-4" id="h0-14-4" class="i">+version = &quot;0.1.5&quot;
</a><a href="#h0-14-5" id="h0-14-5" class="i">+source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
</a><a href="#h0-14-6" id="h0-14-6" class="i">+checksum = &quot;70ec6ce85bb158151cae5e5c87f95a8e97d2c0c4b001223f33a334e3ce5de178&quot;
</a><a href="#h0-14-7" id="h0-14-7" class="i">+dependencies = [
</a><a href="#h0-14-8" id="h0-14-8" class="i">+ &quot;winapi&quot;,
</a><a href="#h0-14-9" id="h0-14-9" class="i">+]
</a><a href="#h0-14-10" id="h0-14-10" class="i">+
</a><a href="#h0-14-11" id="h0-14-11" class="i">+[[package]]
</a> name = &quot;winapi-x86_64-pc-windows-gnu&quot;
 version = &quot;0.4.0&quot;
 source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
<b>diff --git a/<a id="h1" href="../file/Cargo.toml.html">Cargo.toml</a> b/<a href="../file/Cargo.toml.html">Cargo.toml</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -23,4 +23,8 @@ minreq = {version = &quot;2.2.1&quot;, features = [&quot;https&quot;]}
</a> # Pager
 pager = &quot;0.16.0&quot;
 # Directories
<a href="#h1-0-3" id="h1-0-3" class="d">-dirs-next = &quot;2.0.0&quot;
</a><a href="#h1-0-4" id="h1-0-4" class="d">-\ No newline at end of file
</a><a href="#h1-0-5" id="h1-0-5" class="i">+dirs-next = &quot;2.0.0&quot;
</a><a href="#h1-0-6" id="h1-0-6" class="i">+# ripgrep, as a library.
</a><a href="#h1-0-7" id="h1-0-7" class="i">+grep = &quot;0.2&quot;
</a><a href="#h1-0-8" id="h1-0-8" class="i">+#
</a><a href="#h1-0-9" id="h1-0-9" class="i">+walkdir = &quot;2.3.1&quot;
</a><a href="#h1-0-10" id="h1-0-10" class="i">+\ No newline at end of file
</a><b>diff --git a/<a id="h2" href="../file/src/%23search.rs%23.html">src/#search.rs#</a> b/<a href="../file/src/%23search.rs%23.html">src/#search.rs#</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -0,0 +1,66 @@
</a><a href="#h2-0-0" id="h2-0-0" class="i">+extern crate grep;
</a><a href="#h2-0-1" id="h2-0-1" class="i">+extern crate walkdir;
</a><a href="#h2-0-2" id="h2-0-2" class="i">+
</a><a href="#h2-0-3" id="h2-0-3" class="i">+use std::env;
</a><a href="#h2-0-4" id="h2-0-4" class="i">+use std::error::Error;
</a><a href="#h2-0-5" id="h2-0-5" class="i">+use std::ffi::OsString;
</a><a href="#h2-0-6" id="h2-0-6" class="i">+use std::process;
</a><a href="#h2-0-7" id="h2-0-7" class="i">+use std::io::prelude::*;
</a><a href="#h2-0-8" id="h2-0-8" class="i">+
</a><a href="#h2-0-9" id="h2-0-9" class="i">+use grep::cli;
</a><a href="#h2-0-10" id="h2-0-10" class="i">+use grep::printer::{ColorSpecs, StandardBuilder};
</a><a href="#h2-0-11" id="h2-0-11" class="i">+use grep::regex::RegexMatcher;
</a><a href="#h2-0-12" id="h2-0-12" class="i">+use grep::searcher::{BinaryDetection, SearcherBuilder};
</a><a href="#h2-0-13" id="h2-0-13" class="i">+use walkdir::WalkDir;
</a><a href="#h2-0-14" id="h2-0-14" class="i">+
</a><a href="#h2-0-15" id="h2-0-15" class="i">+fn main() {
</a><a href="#h2-0-16" id="h2-0-16" class="i">+    if let Err(err) = try_main() {
</a><a href="#h2-0-17" id="h2-0-17" class="i">+        eprintln!(&quot;{}&quot;, err);
</a><a href="#h2-0-18" id="h2-0-18" class="i">+        process::exit(1);
</a><a href="#h2-0-19" id="h2-0-19" class="i">+    }
</a><a href="#h2-0-20" id="h2-0-20" class="i">+}
</a><a href="#h2-0-21" id="h2-0-21" class="i">+
</a><a href="#h2-0-22" id="h2-0-22" class="i">+fn try_main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</a><a href="#h2-0-23" id="h2-0-23" class="i">+    let mut args: Vec&lt;OsString&gt; = env::args_os().collect();
</a><a href="#h2-0-24" id="h2-0-24" class="i">+    if args.len() &lt; 2 {
</a><a href="#h2-0-25" id="h2-0-25" class="i">+        return Err(&quot;Usage: simplegrep &lt;pattern&gt; [&lt;path&gt; ...]&quot;.into());
</a><a href="#h2-0-26" id="h2-0-26" class="i">+    }
</a><a href="#h2-0-27" id="h2-0-27" class="i">+    if args.len() == 2 {
</a><a href="#h2-0-28" id="h2-0-28" class="i">+        args.push(OsString::from(&quot;./&quot;));
</a><a href="#h2-0-29" id="h2-0-29" class="i">+    }
</a><a href="#h2-0-30" id="h2-0-30" class="i">+    search(cli::pattern_from_os(&amp;args[1])?, &amp;args[2..])
</a><a href="#h2-0-31" id="h2-0-31" class="i">+}
</a><a href="#h2-0-32" id="h2-0-32" class="i">+
</a><a href="#h2-0-33" id="h2-0-33" class="i">+fn search(pattern: &amp;str, spath: OsString) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</a><a href="#h2-0-34" id="h2-0-34" class="i">+    let matcher = RegexMatcher::new_line_matcher(&amp;pattern)?;
</a><a href="#h2-0-35" id="h2-0-35" class="i">+    let mut searcher = SearcherBuilder::new()
</a><a href="#h2-0-36" id="h2-0-36" class="i">+        .binary_detection(BinaryDetection::quit(b&#39;\x00&#39;))
</a><a href="#h2-0-37" id="h2-0-37" class="i">+        .line_number(false)
</a><a href="#h2-0-38" id="h2-0-38" class="i">+        .build();
</a><a href="#h2-0-39" id="h2-0-39" class="i">+    let mut printer = StandardBuilder::new()
</a><a href="#h2-0-40" id="h2-0-40" class="i">+        .color_specs(ColorSpecs::default_with_color())
</a><a href="#h2-0-41" id="h2-0-41" class="i">+        .build(cli::stdout(if cli::is_tty_stdout() {
</a><a href="#h2-0-42" id="h2-0-42" class="i">+            ColorChoice::Auto
</a><a href="#h2-0-43" id="h2-0-43" class="i">+        } else {
</a><a href="#h2-0-44" id="h2-0-44" class="i">+            ColorChoice::Never
</a><a href="#h2-0-45" id="h2-0-45" class="i">+        }));
</a><a href="#h2-0-46" id="h2-0-46" class="i">+
</a><a href="#h2-0-47" id="h2-0-47" class="i">+    for result in WalkDir::new(spath) {
</a><a href="#h2-0-48" id="h2-0-48" class="i">+        let dent = match result {
</a><a href="#h2-0-49" id="h2-0-49" class="i">+            Ok(dent) =&gt; dent,
</a><a href="#h2-0-50" id="h2-0-50" class="i">+            Err(err) =&gt; {
</a><a href="#h2-0-51" id="h2-0-51" class="i">+                eprintln!(&quot;{}&quot;, err);
</a><a href="#h2-0-52" id="h2-0-52" class="i">+                continue;
</a><a href="#h2-0-53" id="h2-0-53" class="i">+            }
</a><a href="#h2-0-54" id="h2-0-54" class="i">+        };
</a><a href="#h2-0-55" id="h2-0-55" class="i">+        if !dent.file_type().is_file() {
</a><a href="#h2-0-56" id="h2-0-56" class="i">+            continue;
</a><a href="#h2-0-57" id="h2-0-57" class="i">+        }
</a><a href="#h2-0-58" id="h2-0-58" class="i">+        let result = searcher.search_path(&amp;matcher, dent.path(), std::io::stdout);
</a><a href="#h2-0-59" id="h2-0-59" class="i">+        if let Err(err) = result {
</a><a href="#h2-0-60" id="h2-0-60" class="i">+            eprintln!(&quot;{}: {}&quot;, dent.path().display(), err);
</a><a href="#h2-0-61" id="h2-0-61" class="i">+        }
</a><a href="#h2-0-62" id="h2-0-62" class="i">+    }
</a><a href="#h2-0-63" id="h2-0-63" class="i">+
</a><a href="#h2-0-64" id="h2-0-64" class="i">+    Ok(())
</a><a href="#h2-0-65" id="h2-0-65" class="i">+}
</a><b>diff --git a/<a id="h3" href="../file/src/search.rs.html">src/search.rs</a> b/<a href="../file/src/search.rs.html">src/search.rs</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,65 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+extern crate grep;
</a><a href="#h3-0-1" id="h3-0-1" class="i">+extern crate walkdir;
</a><a href="#h3-0-2" id="h3-0-2" class="i">+
</a><a href="#h3-0-3" id="h3-0-3" class="i">+use std::env;
</a><a href="#h3-0-4" id="h3-0-4" class="i">+use std::error::Error;
</a><a href="#h3-0-5" id="h3-0-5" class="i">+use std::ffi::OsString;
</a><a href="#h3-0-6" id="h3-0-6" class="i">+use std::process;
</a><a href="#h3-0-7" id="h3-0-7" class="i">+
</a><a href="#h3-0-8" id="h3-0-8" class="i">+use grep::cli;
</a><a href="#h3-0-9" id="h3-0-9" class="i">+use grep::printer::{ColorSpecs, StandardBuilder};
</a><a href="#h3-0-10" id="h3-0-10" class="i">+use grep::regex::RegexMatcher;
</a><a href="#h3-0-11" id="h3-0-11" class="i">+use grep::searcher::{BinaryDetection, SearcherBuilder};
</a><a href="#h3-0-12" id="h3-0-12" class="i">+use walkdir::WalkDir;
</a><a href="#h3-0-13" id="h3-0-13" class="i">+
</a><a href="#h3-0-14" id="h3-0-14" class="i">+fn main() {
</a><a href="#h3-0-15" id="h3-0-15" class="i">+    if let Err(err) = try_main() {
</a><a href="#h3-0-16" id="h3-0-16" class="i">+        eprintln!(&quot;{}&quot;, err);
</a><a href="#h3-0-17" id="h3-0-17" class="i">+        process::exit(1);
</a><a href="#h3-0-18" id="h3-0-18" class="i">+    }
</a><a href="#h3-0-19" id="h3-0-19" class="i">+}
</a><a href="#h3-0-20" id="h3-0-20" class="i">+
</a><a href="#h3-0-21" id="h3-0-21" class="i">+fn try_main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</a><a href="#h3-0-22" id="h3-0-22" class="i">+    let mut args: Vec&lt;OsString&gt; = env::args_os().collect();
</a><a href="#h3-0-23" id="h3-0-23" class="i">+    if args.len() &lt; 2 {
</a><a href="#h3-0-24" id="h3-0-24" class="i">+        return Err(&quot;Usage: simplegrep &lt;pattern&gt; [&lt;path&gt; ...]&quot;.into());
</a><a href="#h3-0-25" id="h3-0-25" class="i">+    }
</a><a href="#h3-0-26" id="h3-0-26" class="i">+    if args.len() == 2 {
</a><a href="#h3-0-27" id="h3-0-27" class="i">+        args.push(OsString::from(&quot;./&quot;));
</a><a href="#h3-0-28" id="h3-0-28" class="i">+    }
</a><a href="#h3-0-29" id="h3-0-29" class="i">+    search(cli::pattern_from_os(&amp;args[1])?, &amp;args[2..])
</a><a href="#h3-0-30" id="h3-0-30" class="i">+}
</a><a href="#h3-0-31" id="h3-0-31" class="i">+
</a><a href="#h3-0-32" id="h3-0-32" class="i">+fn search(pattern: &amp;str, spath: OsString) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</a><a href="#h3-0-33" id="h3-0-33" class="i">+    let matcher = RegexMatcher::new_line_matcher(&amp;pattern)?;
</a><a href="#h3-0-34" id="h3-0-34" class="i">+    let mut searcher = SearcherBuilder::new()
</a><a href="#h3-0-35" id="h3-0-35" class="i">+        .binary_detection(BinaryDetection::quit(b&#39;\x00&#39;))
</a><a href="#h3-0-36" id="h3-0-36" class="i">+        .line_number(false)
</a><a href="#h3-0-37" id="h3-0-37" class="i">+        .build();
</a><a href="#h3-0-38" id="h3-0-38" class="i">+    let mut printer = StandardBuilder::new()
</a><a href="#h3-0-39" id="h3-0-39" class="i">+        .color_specs(ColorSpecs::default_with_color())
</a><a href="#h3-0-40" id="h3-0-40" class="i">+        .build(cli::stdout(if cli::is_tty_stdout() {
</a><a href="#h3-0-41" id="h3-0-41" class="i">+            ColorChoice::Auto
</a><a href="#h3-0-42" id="h3-0-42" class="i">+        } else {
</a><a href="#h3-0-43" id="h3-0-43" class="i">+            ColorChoice::Never
</a><a href="#h3-0-44" id="h3-0-44" class="i">+        }));
</a><a href="#h3-0-45" id="h3-0-45" class="i">+
</a><a href="#h3-0-46" id="h3-0-46" class="i">+    for result in WalkDir::new(spath) {
</a><a href="#h3-0-47" id="h3-0-47" class="i">+        let dent = match result {
</a><a href="#h3-0-48" id="h3-0-48" class="i">+            Ok(dent) =&gt; dent,
</a><a href="#h3-0-49" id="h3-0-49" class="i">+            Err(err) =&gt; {
</a><a href="#h3-0-50" id="h3-0-50" class="i">+                eprintln!(&quot;{}&quot;, err);
</a><a href="#h3-0-51" id="h3-0-51" class="i">+                continue;
</a><a href="#h3-0-52" id="h3-0-52" class="i">+            }
</a><a href="#h3-0-53" id="h3-0-53" class="i">+        };
</a><a href="#h3-0-54" id="h3-0-54" class="i">+        if !dent.file_type().is_file() {
</a><a href="#h3-0-55" id="h3-0-55" class="i">+            continue;
</a><a href="#h3-0-56" id="h3-0-56" class="i">+        }
</a><a href="#h3-0-57" id="h3-0-57" class="i">+        let result = searcher.search_path(&amp;matcher, dent.path(), std::io::stdout);
</a><a href="#h3-0-58" id="h3-0-58" class="i">+        if let Err(err) = result {
</a><a href="#h3-0-59" id="h3-0-59" class="i">+            eprintln!(&quot;{}: {}&quot;, dent.path().display(), err);
</a><a href="#h3-0-60" id="h3-0-60" class="i">+        }
</a><a href="#h3-0-61" id="h3-0-61" class="i">+    }
</a><a href="#h3-0-62" id="h3-0-62" class="i">+
</a><a href="#h3-0-63" id="h3-0-63" class="i">+    Ok(())
</a><a href="#h3-0-64" id="h3-0-64" class="i">+}
</a><b>diff --git a/<a id="h4" href="../file/src/storage.rs.html">src/storage.rs</a> b/<a href="../file/src/storage.rs.html">src/storage.rs</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -123,22 +123,4 @@ impl Storage {
</a>             std::fs::remove_dir_all(&amp;self.rfc_dir_path).unwrap();
         }
     }
<a href="#h4-0-3" id="h4-0-3" class="d">-
</a><a href="#h4-0-4" id="h4-0-4" class="d">-    // Get path of home directory
</a><a href="#h4-0-5" id="h4-0-5" class="d">-    // (`~/rfc/` on unix systems and `C:\Users\{NAME}` on windows)
</a><a href="#h4-0-6" id="h4-0-6" class="d">-    pub fn get_home_path() -&gt; Option&lt;String&gt; {
</a><a href="#h4-0-7" id="h4-0-7" class="d">-        if let Some(home_path) = dirs_next::home_dir() {
</a><a href="#h4-0-8" id="h4-0-8" class="d">-            let path = if cfg!(unix) || cfg!(macos) {
</a><a href="#h4-0-9" id="h4-0-9" class="d">-                format!(&quot;{}/rfc/&quot;, home_path.to_str().unwrap())
</a><a href="#h4-0-10" id="h4-0-10" class="d">-            } else if cfg!(windows) {
</a><a href="#h4-0-11" id="h4-0-11" class="d">-                format!(&quot;{}\\rfc\\&quot;, home_path.to_str().unwrap())
</a><a href="#h4-0-12" id="h4-0-12" class="d">-            } else {
</a><a href="#h4-0-13" id="h4-0-13" class="d">-                panic!(&quot;Unsupported OS&quot;);
</a><a href="#h4-0-14" id="h4-0-14" class="d">-            };
</a><a href="#h4-0-15" id="h4-0-15" class="d">-
</a><a href="#h4-0-16" id="h4-0-16" class="d">-            Some(path)
</a><a href="#h4-0-17" id="h4-0-17" class="d">-        } else {
</a><a href="#h4-0-18" id="h4-0-18" class="d">-            None
</a><a href="#h4-0-19" id="h4-0-19" class="d">-        }
</a><a href="#h4-0-20" id="h4-0-20" class="d">-    }
</a> }
</pre>
</div>
</body>
</html>
